{"version":3,"sources":["../src/index.js"],"names":["levelNames","WinstonTransportType","log","WinstonAdapterHandler","winstonTransport","minLevel","handle","record","Promise","resolve","reject","level","message","level_name","get","key","metadata","extra","context","err"],"mappings":";AAAA;AACA,OAAOA,UAAP,MAAuB,yBAAvB;;IAEKC,oB;AACHC,K;;;AAGF,eAAe,SAASC,qBAAT,CACbC,gBADa,EAEbC,QAFa,EAGb;AAAA,UAFAD,gBAEA,EAFkBH,oBAElB;;AAAA,UADAI,QACA;;AACA,OAAKA,QAAL,GAAgBA,QAAhB;AACA,OAAKC,MAAL,GAAcC,UACZ,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAC/BN,qBAAiBF,GAAjB,CAAqBK,OAAOI,KAA5B,EAAmCJ,OAAOK,OAA1C,EAAmD;AACjDC,kBAAYb,WAAWc,GAAX,CAAeP,OAAOI,KAAtB,CADqC;AAEjDI,WAAKR,OAAOQ,GAFqC;AAGjDC,gBAAUT,OAAOS,QAHgC;AAIjDC,aAAOV,OAAOU,KAJmC;AAKjDC,eAASX,OAAOW;AALiC,KAAnD,EAMIC,GAAD,IAAS;AACV,UAAIA,GAAJ,EAAS;AACP,eAAOT,OAAOS,GAAP,CAAP;AACD;;AAEDV;AACD,KAZD;AAaD,GAdD,CADF;AAiBD","file":"index.js","sourcesContent":["/* eslint camelcase:\"off\" */\nimport levelNames from 'nightingale-level-names';\n\ntype WinstonTransportType = {\n  log: Function,\n};\n\nexport default function WinstonAdapterHandler(\n  winstonTransport: WinstonTransportType,\n  minLevel: number,\n) {\n  this.minLevel = minLevel;\n  this.handle = record => (\n    new Promise((resolve, reject) => {\n      winstonTransport.log(record.level, record.message, {\n        level_name: levelNames.get(record.level),\n        key: record.key,\n        metadata: record.metadata,\n        extra: record.extra,\n        context: record.context,\n      }, (err) => {\n        if (err) {\n          return reject(err);\n        }\n\n        resolve();\n      });\n    })\n  );\n}\n"]}