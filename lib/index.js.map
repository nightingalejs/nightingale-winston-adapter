{"version":3,"sources":["../src/index.js"],"names":[],"mappings":";;;;;;;AACA;;;;AACA;;;;;;;;;;;;;;IAKqB,qB,GAAN,MAAM,qBAAN,sCAAoD;;;;;AAC/D,gBAAY,gBAAZ,EAA8B,QAA9B,EAAwC;AACpC,cAAM,QAAN;AACA,aAAK,gBAAL,GAAwB,gBAAxB;AACH;;;;MAED,OAAO,MAAP,EAAe;AACX,eAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAqB;AACpC,iBAAK,gBAAL,CAAsB,GAAtB,CAA0B,OAAO,KAAjC,EAAwC,OAAO,OAA/C,EAAwD;AACpD,4BAAY,gCAAW,GAAX,CAAe,OAAO,KAAtB,CADwC;AAEpD,qBAAK,OAAO,GAFwC;AAGpD,0BAAU,OAAO,QAHmC;AAIpD,uBAAO,OAAO;AAJsC,aAAxD,EAKI,GAAD,IAAS;AACR,oBAAI,GAAJ,EAAS;AACL,2BAAO,OAAO,GAAP,CAAP;AACH;;AAED;AACH,aAXD;AAYH,SAbM,CAAP;AAcH;AArB8D,C;kBAA9C,qB","file":"index.js","sourcesContent":["/* eslint camelcase:\"off\" */\nimport AbstractHandler from 'nightingale-handler';\nimport levelNames from 'nightingale-level-names';\n\n/**\n * @param {int} minLevel\n */\nexport default class WinstonAdapterHandler extends AbstractHandler {\n    constructor(winstonTransport, minLevel) {\n        super(minLevel);\n        this.winstonTransport = winstonTransport;\n    }\n\n    handle(record) {\n        return new Promise((resolve, reject) => {\n            this.winstonTransport.log(record.level, record.message, {\n                level_name: levelNames.get(record.level),\n                key: record.key,\n                metadata: record.metadata,\n                extra: record.extra,\n            }, (err) => {\n                if (err) {\n                    return reject(err);\n                }\n\n                resolve();\n            });\n        });\n    }\n}\n"]}